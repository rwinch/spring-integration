<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JMS Support :: Spring Integration</title>
    <link rel="prev" href="jpa/outbound-gateways.html">
    <link rel="next" href="jmx.html">
    <meta name="generator" content="Antora 3.2.0-alpha.2">
    <script>
!function (theme, navWidth) {
  if (theme === 'dark') document.documentElement.classList.add('dark-theme')
  if (navWidth) document.documentElement.style.setProperty('--nav-width', `${navWidth}px`)
}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'),
  localStorage && localStorage.getItem('nav-width'))
    </script>
    <link rel="stylesheet" href="./_/css/site.css">
    <link rel="stylesheet" href="./_/css/vendor/search.css">
    <link rel="stylesheet" href="./_/css/vendor/asciidoctor-tabs.css">

    <meta name="version" content="6.2.0">
    <meta name="component" content="integration">
    <link rel="icon" href="./_/img/favicon.ico" type="image/vnd.microsoft.icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://spring.io">
        <img
          id="springlogo"
          class="block"
          src="./_/img/spring-logo.svg"
          alt="Spring"
        />
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Why Spring</a>
          <div class="navbar-dropdown">
            <a
              class="navbar-item"
              href="https://spring.io/why-spring"
            >Overview</a>
            <a
              class="navbar-item"
              href="https://spring.io/microservices"
            >Microservices</a>
            <a
              class="navbar-item"
              href="https://spring.io/reactive"
            >Reactive</a>
            <a class="navbar-item" href="https://spring.io/event-driven">Event
              Driven</a>
            <a class="navbar-item" href="https://spring.io/cloud">Cloud</a>
            <a class="navbar-item" href="https://spring.io/web-applications">Web
              Applications</a>
            <a
              class="navbar-item"
              href="https://spring.io/serverless"
            >Serverless</a>
            <a class="navbar-item" href="https://spring.io/batch">Batch</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Learn</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://spring.io/learn">Overview</a>
            <a
              class="navbar-item"
              href="https://spring.io/quickstart"
            >Quickstart</a>
            <a class="navbar-item" href="https://spring.io/guides">Guides</a>
            <a class="navbar-item" href="https://spring.io/blog">Blog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Projects</a>
          <div class="navbar-dropdown" style="min-width: 280px">
            <a
              class="navbar-item"
              href="https://spring.io/projects"
            >Overview</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-boot"
            >Spring Boot</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-framework"
            >Spring Framework</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-cloud"
            >Spring Cloud</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-cloud-dataflow"
            >Spring Cloud Data Flow</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-data"
            >Spring Data</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-integration"
            >Spring Integration</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-batch"
            >Spring Batch</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-security"
            >Spring Security</a>
            <a
              class="navbar-item navbar-item-special"
              href="https://spring.io/projects"
            >View all projects</a>
            <a class="navbar-item" href="https://spring.io/tools">Spring Tools 4</a>
            <a
              class="navbar-item navbar-item-special-2"
              href="https://start.spring.io"
            >Spring Initializr
              <svg
                class="external-link-icon"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
              ><polyline
                  points="15 10.94 15 15 1 15 1 1 5.06 1"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="2"
                ></polyline><polyline
                  points="8.93 1 15 1 15 7.07"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="2"
                ></polyline><line
                  x1="15"
                  y1="1"
                  x2="8"
                  y2="8"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="2"
                ></line></svg></a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Academy</a>
          <div class="navbar-dropdown">
            <a
              class="navbar-item"
              href="https://spring.academy/courses"
            >Courses</a>
            <a
              class="navbar-item"
              href="https://spring.academy/learning-path"
            >Get Certified</a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://spring.io/support">Overview</a>
            <a class="navbar-item" href="https://spring.io/security">Security
              Advisories</a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable is-community">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown">
            <a
              class="navbar-item"
              href="https://spring.io/community"
            >Overview</a>
            <a class="navbar-item" href="https://spring.io/events">Events</a>
            <a class="navbar-item" href="https://spring.io/team">Team</a>
          </div>
        </div>
      </div>
    </div>
    <label class="theme-toggler">
      <input
        type="checkbox"
        type="checkbox"
        id="switch-theme-checkbox"
        name="switch-theme-checkbox"
      />
      <span class="icon"><svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fas"
          data-icon="moon"
          class="svg-inline--fa fa-moon moon"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 384 512"
        ><path
            fill="currentColor"
            d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"
          ></path>
        </svg>
        <svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fas"
          data-icon="sun"
          class="svg-inline--fa fa-sun sun"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        ><path
            fill="currentColor"
            d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"
          ></path>
        </svg></span>
      <span class="text">light</span>
    </label>
  </nav>
</header>
<script>
!function (theme) {
  if (theme === 'dark') {
    document.getElementById('switch-theme-checkbox').parentElement.classList.add('active')
  }
}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'))
</script><div class="body">
<div class="nav-container" data-component="integration" data-version="6.2.0">
  <aside class="nav">
    <div class="panels">
      <div class="nav-panel-menu is-active" data-panel="menu">
        <nav class="nav-menu">
<div class="context">
  <span class="title">Spring Integration</span>
  <span class="version">6.2.0-SNAPSHOT</span>
  <button class="browse-version" id="browse-version">
    <svg
      height="24px"
      id="Layer_1"
      style="enable-background:new 0 0 512 512;"
      version="1.1"
      viewBox="0 0 512 512"
      width="24px"
      xml:space="preserve"
    ><g><path
          d="M256,224c-17.7,0-32,14.3-32,32s14.3,32,32,32c17.7,0,32-14.3,32-32S273.7,224,256,224L256,224z"
        ></path><path
          d="M128.4,224c-17.7,0-32,14.3-32,32s14.3,32,32,32c17.7,0,32-14.3,32-32S146,224,128.4,224L128.4,224z"
        ></path><path
          d="M384,224c-17.7,0-32,14.3-32,32s14.3,32,32,32s32-14.3,32-32S401.7,224,384,224L384,224z"
        ></path></g></svg>
  </button>
</div><div class="search">
  <button class="DocSearch-Button search-button">
    <svg enable-background="new 0 0 32 32" id="Glyph" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <path d="M27.414,24.586l-5.077-5.077C23.386,17.928,24,16.035,24,14c0-5.514-4.486-10-10-10S4,8.486,4,14  s4.486,10,10,10c2.035,0,3.928-0.614,5.509-1.663l5.077,5.077c0.78,0.781,2.048,0.781,2.828,0  C28.195,26.633,28.195,25.367,27.414,24.586z M7,14c0-3.86,3.14-7,7-7s7,3.14,7,7s-3.14,7-7,7S7,17.86,7,14z" id="XMLID_223_"/>
    </svg>
    <span>Search</span>
    <span class="search-key"></span>
  </button>
</div>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Home</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="preface.html">Preface</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="whats-new.html">What&#8217;s New?</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="core.html">Core Messaging</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="channel.html">Message Channels</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="channel/interfaces.html">The MessageChannel Interface</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="channel/implementations.html">Message Channel Implementations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="channel/interceptors.html">Channel Interceptors</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="channel/template.html"><code>MessagingTemplate</code></a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="channel/configuration.html">Configuring Message Channels</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="channel/special-channels.html">Special Channels</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="polling-consumer.html">Poller</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="channel-adapter.html">Channel Adapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bridge.html">Messaging Bridge</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="message.html">Message</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="message-routing.html">Message Routing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="router.html">Routers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="router/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="router/common-parameters.html">Common Router Parameters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="router/implementations.html">Router Implementations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="router/namespace.html">Configuring a Generic Router</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="router/spel.html">Routers and the Spring Expression Language (SpEL)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="router/annotation.html">Configuring a Router with Annotations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="router/dynamic-routers.html">Dynamic Routers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="router/routing-slip.html">Routing Slip</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="router/process-manager.html">Process Manager Enterprise Integration Pattern</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="filter.html">Filter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="splitter.html">Splitter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="aggregator.html">Aggregator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="resequencer.html">Resequencer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="chain.html">Message Handler Chain</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="scatter-gather.html">Scatter-Gather</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="barrier.html">Thread Barrier</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="message-transformation.html">Message Transformation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="transformer.html">Transformer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="content-enrichment.html">Content Enricher</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="claim-check.html">Claim Check</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="codec.html">Codec</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="messaging-endpoints.html">Messaging Endpoints</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="endpoint.html">Message Endpoints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="endpoint-roles.html">Endpoint Roles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="leadership-event-handling.html">Leadership Event Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="gateway.html">Messaging Gateways</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="service-activator.html">Service Activator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="delayer.html">Delayer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="scripting.html">Scripting Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="groovy.html">Groovy Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="handler-advice.html">Adding Behavior to Endpoints</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="handler-advice/classes.html">Provided Advice Classes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="handler-advice/reactive.html">Reactive Advice</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="handler-advice/context-holder.html">Context Holder Advice</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="handler-advice/custom.html">Custom Advice Classes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="handler-advice/other.html">Other Advice Chain Elements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="handler-advice/handle-message.html">Handling Message Advice</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="handler-advice/tx-handle-message.html">Transaction Support</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="handler-advice/advising-filters.html">Advising Filters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="handler-advice/advising-with-annotations.html">Advising Endpoints Using Annotations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="handler-advice/order.html">Ordering Advices within Advice Chain</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="handler-advice/advised-properties.html">Advised Handler Properties</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="handler-advice/idempotent-receiver.html">Idempotent Receiver Enterprise Integration Pattern</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="logging-adapter.html">Logging Channel Adapter</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="functions-support.html"><code>java.util.function</code> Interfaces Support</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="kotlin-functions.html">Kotlin Support</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="dsl.html">Java DSL</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-basics.html">DSL Basics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-channels.html">Message Channels</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-pollers.html">Pollers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-reactive.html">The <code>reactive()</code> Endpoint</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-endpoints.html">DSL and Endpoint Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-transformers.html">Transformers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-inbound-adapters.html">Inbound Channel Adapters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-routers.html">Message Routers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-splitters.html">Splitters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-aggregators.html">Aggregators and Resequencers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-handle.html">Service Activators and the <code>.handle()</code> method</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-gateway.html">Operator gateway()</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-log.html">Operator log()</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-intercept.html">Operator intercept()</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-wiretap.html"><code>MessageChannelSpec.wireTap()</code></a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-flows.html">Working With Message Flows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-function-expression.html"><code>FunctionExpression</code></a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-subflows.html">Sub-flows support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-protocol-adapters.html">Using Protocol Adapters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-flow-adapter.html"><code>IntegrationFlowAdapter</code></a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-runtime-flows.html">Dynamic and Runtime Integration Flows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/integration-flow-as-gateway.html"><code>IntegrationFlow</code> as a Gateway</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/java-extensions.html">DSL Extensions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dsl/integration-flows-composition.html">Integration Flows Composition</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="groovy-dsl.html">Groovy DSL</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="kotlin-dsl.html">Kotlin DSL</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="system-management.html">System Management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="metrics.html">Metrics and Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="message-history.html">Message History</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="message-store.html">Message Store</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="meta-data-store.html">Metadata Store</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="control-bus.html">Control Bus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="shutdown.html">Orderly Shutdown</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="graph.html">Integration Graph</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="integration-graph-controller.html">Integration Graph Controller</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="reactive-streams.html">Reactive Streams Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="native-aot.html">Native Images Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="endpoint-summary.html">Integration Endpoints</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="amqp.html">AMQP Support</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/inbound-channel-adapter.html">Inbound Channel Adapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/polled-inbound-channel-adapter.html">Polled Inbound Channel Adapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/inbound-gateway.html">Inbound Gateway</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/inbound-ack.html">Inbound Endpoint Acknowledge Mode</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/outbound-endpoints.html">Outbound Endpoints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/outbound-channel-adapter.html">Outbound Channel Adapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/outbound-gateway.html">Outbound Gateway</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/async-outbound-gateway.html">Asynchronous Outbound Gateway</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/alternative-confirms-returns.html">Alternative Mechanism for Publisher Confirms and Returns</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/conversion-inbound.html">Inbound Message Conversion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/content-type-conversion-outbound.html">Outbound Message Conversion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/user-id.html">Outbound User ID</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/delay.html">Delayed Message Exchange</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/channels.html">AMQP-backed Message Channels</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/message-headers.html">AMQP Message Headers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/strict-ordering.html">Strict Message Ordering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/samples.html">AMQP Samples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="amqp/rmq-streams.html">RabbitMQ Stream Queue Support</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="camel.html">Apache Camel Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cassandra.html">Apache Cassandra Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="debezium.html">Debezium Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="event.html">Spring <code>ApplicationEvent</code> Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="feed.html">Feed Adapter</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="file.html">File Support</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="file/reading.html">Reading Files</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="file/writing.html">Writing files</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="file/transforming.html">File Transformers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="file/splitter.html">File Splitter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="file/aggregator.html">File Aggregator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="file/remote-persistent-flf.html">Remote Persistent File List Filters</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="ftp.html">FTP/FTPS Adapters</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ftp/session-factory.html">FTP Session Factory</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ftp/advanced-configuration.html">Advanced Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ftp/dsf.html">Delegating Session Factory</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ftp/inbound.html">FTP Inbound Channel Adapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ftp/streaming.html">FTP Streaming Inbound Channel Adapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ftp/rotating-server-advice.html">Inbound Channel Adapters: Polling Multiple Servers and Directories</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ftp/max-fetch.html">Inbound Channel Adapters: Controlling Remote File Fetching</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ftp/outbound.html">FTP Outbound Channel Adapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ftp/outbound-gateway.html">FTP Outbound Gateway</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ftp/session-caching.html">FTP Session Caching</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ftp/rft.html">Using <code>RemoteFileTemplate</code></a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ftp/session-callback.html">Using <code>MessageSessionCallback</code></a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ftp/server-events.html">Apache Mina FTP Server Events</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ftp/remote-file-info.html">Remote File Information</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="graphql.html">GraphQL Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="hazelcast.html">Hazelcast Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="http.html">HTTP Support</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="http/inbound.html">Http Inbound Components</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="http/outbound.html">HTTP Outbound Components</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="http/namespace.html">HTTP Namespace Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="http/java-config.html">Configuring HTTP Endpoints with Java</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="http/timeout.html">Timeout Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="http/proxy.html">HTTP Proxy configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="http/header-mapping.html">HTTP Header Mappings</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="http/int-graph-controller.html">Integration Graph Controller</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="http/samples.html">HTTP Samples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="jdbc.html">JDBC Support</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jdbc/inbound-channel-adapter.html">Inbound Channel Adapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jdbc/outbound-channel-adapter.html">Outbound Channel Adapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jdbc/outbound-gateway.html">Outbound Gateway</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jdbc/message-store.html">JDBC Message Store</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jdbc/stored-procedures.html">Stored Procedures</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jdbc/lock-registry.html">JDBC Lock Registry</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jdbc/metadata-store.html">JDBC Metadata Store</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="jpa.html">JPA Support</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jpa/functionality.html">Functionality</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jpa/supported-persistence-providers.html">Supported Persistence Providers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jpa/java-implementation.html">Java Implementation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jpa/namespace-support.html">Namespace Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jpa/inbound-channel-adapter.html">Inbound Channel Adapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jpa/outbound-channel-adapter.html">Outbound Channel Adapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jpa/outbound-gateways.html">Outbound Gateways</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="jms.html">JMS Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="jmx.html">JMX Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="kafka.html">Apache Kafka Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="mail.html">Mail Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="mongodb.html">MongoDb Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="mqtt.html">MQTT Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="r2dbc.html">R2DBC Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="redis.html">Redis Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="resource.html">Resource Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="rsocket.html">RSocket Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="sftp.html">SFTP Adapters</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sftp/session-factory.html">SFTP Session Factory</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sftp/dsf.html">Delegating Session Factory</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sftp/session-caching.html">SFTP Session Caching</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sftp/rft.html">Using <code>RemoteFileTemplate</code></a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sftp/inbound.html">SFTP Inbound Channel Adapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sftp/streaming.html">SFTP Streaming Inbound Channel Adapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sftp/rotating-server-advice.html">Inbound Channel Adapters: Polling Multiple Servers and Directories</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sftp/max-fetch.html">Inbound Channel Adapters: Controlling Remote File Fetching</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sftp/outbound.html">SFTP Outbound Channel Adapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sftp/outbound-gateway.html">SFTP Outbound Gateway</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sftp/session-callback.html">MessageSessionCallback</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sftp/server-events.html">Apache Mina SFTP Server Events</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sftp/remote-file-info.html">Remote File Information</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="smb.html">SMB Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="stomp.html">STOMP Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="stream.html">Stream Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="syslog.html">Syslog Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="ip.html">TCP and UDP Support</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip/intro.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip/udp-adapters.html">UDP Adapters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip/tcp-connection-factories.html">TCP Connection Factories</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip/testing-connections.html">Testing Connections</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip/interceptors.html">TCP Connection Interceptors</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip/tcp-events.html">TCP Connection Events</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip/tcp-adapters.html">TCP Adapters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip/tcp-gateways.html">TCP Gateways</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip/correlation.html">TCP Message Correlation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip/note-nio.html">About Non-blocking I/O (NIO)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip/ssl-tls.html">SSL/TLS Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip/tcp-advanced-techniques.html">Advanced Techniques</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip/endpoint-reference.html">IP Configuration Attributes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip/msg-headers.html">IP Message Headers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip/annotation.html">Annotation-Based Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip/dsl.html">Using the Java DSL for TCP Components</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="webflux.html">WebFlux Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="web-sockets.html">WebSockets Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ws.html">Web Services Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="xml.html">XML Support - Dealing with XML Payloads</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="xml/xpath-namespace-support.html">Namespace Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="xml/transformation.html">Transforming XML Payloads</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="xml/xpath-transformer.html">Transforming XML Messages with XPath</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="xml/xpath-splitting.html">Splitting XML Messages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="xml/xpath-routing.html">Routing XML Messages with XPath</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="xml/xpath-header-enricher.html">XPath Header Enricher</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="xml/xpath-filter.html">Using the XPath Filter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="xml/xpath-spel-function.html">#xpath SpEL Function</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="xml/validating-filter.html">XML Validating Filter</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="xmpp.html">XMPP Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="zeromq.html">ZeroMQ Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="zookeeper.html">Zookeeper Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="error-handling.html">Error Handling</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="spel.html">Spring Expression Language (SpEL)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="message-publishing.html">Message Publishing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="transactions.html">Transaction Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="security.html">Security in Spring Integration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="configuration.html">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configuration/namespace.html">Namespace Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configuration/namespace-taskscheduler.html">Configuring the Task Scheduler</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configuration/global-properties.html">Global Properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configuration/annotations.html">Annotation Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configuration/meta-annotations.html">Messaging Meta-Annotations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configuration/message-mapping-rules.html">Message Mapping Rules and Conventions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="testing.html">Testing support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="samples.html">Spring Integration Samples</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="resources.html">Additional Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="history.html">Change History</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes-6.0-6.1.html">Changes between 6.0 and 6.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes-5.5-6.0.html">Changes between 5.5 and 6.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes-5.4-5.5.html">Changes between 5.4 and 5.5</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes-5.3-5.4.html">Changes between 5.3 and 5.4</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes-5.2-5.3.html">Changes between 5.2 and 5.3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes-5.1-5.2.html">Changes between 5.1 and 5.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes-5.0-5.1.html">Changes between 5.0 and 5.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes-4.3-5.0.html">Changes between 4.3 and 5.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes-4.2-4.3.html">Changes between 4.2 and 4.3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes-4.1-4.2.html">Changes between 4.1 and 4.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes-4.0-4.1.html">Changes between 4.0 and 4.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes-3.0-4.0.html">Changes between 3.0 and 4.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes-2.2-3.0.html">Changes Between 2.2 and 3.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes-2.1-2.2.html">Changes between 2.1 and 2.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes-2.0-2.1.html">Changes between 2.0 and 2.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="changes-1.0-2.0.html">Changes between Versions 1.0 and 2.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="zip.html">Zip Support</a>
  </li>
</ul>
  </li>
</ul>
          <div class="toggle-sm">
            <button id="nav-toggle-2" class="nav-toggle"></button>
          </div>
        </nav>
      </div>
      <div class="nav-collapse">
        <button id="nav-collapse-toggle"><span></span></button>        
      </div>
    </div>
    <div class="nav-resize"></div>
  </aside>
</div>
<script>
!function (sidebar) {
  if (sidebar) {
    document.body.classList.add('nav-sm')
  }
}(localStorage && localStorage.getItem('sidebar') === 'close')
</script><main class="article">
<div class="toolbar" role="navigation">
  <button id="nav-toggle-1" class="nav-toggle"></button>
<div class="search">
  <button class="DocSearch-Button search-button">
    <svg enable-background="new 0 0 32 32" id="Glyph" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <path d="M27.414,24.586l-5.077-5.077C23.386,17.928,24,16.035,24,14c0-5.514-4.486-10-10-10S4,8.486,4,14  s4.486,10,10,10c2.035,0,3.928-0.614,5.509-1.663l5.077,5.077c0.78,0.781,2.048,0.781,2.828,0  C28.195,26.633,28.195,25.367,27.414,24.586z M7,14c0-3.86,3.14-7,7-7s7,3.14,7,7s-3.14,7-7,7S7,17.86,7,14z" id="XMLID_223_"/>
    </svg>
    <span>Search</span>
    <span class="search-key"></span>
  </button>
</div>
</div>
  <div class="content">
<aside class="sidebar">
  <div class="content">
    <div
      class="toc"
      data-title="JMS Support"
      data-levels="2"
    >
      <div class="toc-menu"></div>
    </div>
    <div class="sidebar-links">
        <a href="https://github.com/rwinch/spring-integration/edit/main/src/reference/antora/modules/ROOT/pages/jms.adoc">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24"
            viewBox="0 0 24 24"
            width="24"
          ><path
              d="m16 2.012 3 3L16.713 7.3l-3-3zM4 14v3h3l8.299-8.287-3-3zm0 6h16v2H4z"
            ></path></svg>
          Edit this Page
        </a>
              <a href="https://github.com/rwinch/spring-integration" title="Github">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="512px"
            id="Layer_1"
            version="1.1"
            viewBox="0 0 512 512"
            width="512px"
          ><style type="text/css"><![CDATA[
              .st0{fill-rule:evenodd;clip-rule:evenodd;} ]]></style><g><path
                class="st0"
                d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"
              ></path></g></svg>
          Github Project
        </a>
        <a href="https://stackoverflow.com/tags/spring-integration">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path
              d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"
            ></path></svg>
          Stack Overflow
        </a>
    </div>
  </div>
</aside><div class="doc">
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Spring Integration</a></li>
    <li><a href="jms.html">JMS Support</a></li>
  </ul>
</nav>
<article>
<h1 id="page-title" class="page">JMS Support</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Spring Integration provides channel adapters for receiving and sending JMS messages.</p>
</div>
<div class="paragraph">
<p>You need to include this dependency into your project:</p>
</div>
<div id="_tabs_1" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_1_maven" class="tab">
<p>Maven</p>
</li>
<li id="_tabs_1_gradle" class="tab">
<p>Gradle</p>
</li>
</ul>
</div>
<div id="_tabs_1_maven--panel" class="tabpanel" aria-labelledby="_tabs_1_maven">
<div class="listingblock primary">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;
    &lt;artifactId&gt;spring-integration-jms&lt;/artifactId&gt;
    &lt;version&gt;6.2.0-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_gradle--panel" class="tabpanel" aria-labelledby="_tabs_1_gradle">
<div class="listingblock secondary">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">compile "org.springframework.integration:spring-integration-jms:6.2.0-SNAPSHOT"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>jakarta.jms:jakarta.jms-api</code> must be added explicitly via some JMS vendor-specific implementation, e.g. Apache ActiveMQ.</p>
</div>
<div class="paragraph">
<p>There are actually two JMS-based inbound Channel Adapters.
The first uses Spring&#8217;s <code>JmsTemplate</code> to receive based on a polling period.
The second is &#8220;message-driven&#8221; and relies on a Spring <code>MessageListener</code> container.
The outbound channel adapter uses the <code>JmsTemplate</code> to convert and send a JMS message on demand.</p>
</div>
<div class="paragraph">
<p>By using <code>JmsTemplate</code> and the <code>MessageListener</code> container, Spring Integration relies on Spring&#8217;s JMS support.
This is important to understand, since most of the attributes exposed on these adapters configure the underlying <code>JmsTemplate</code> and <code>MessageListener</code> container.
For more details about <code>JmsTemplate</code> and the <code>MessageListener</code> container, see the <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/html/jms.html">Spring JMS documentation</a>.</p>
</div>
<div class="paragraph">
<p>Whereas the JMS channel adapters are intended for unidirectional messaging (send-only or receive-only), Spring Integration also provides inbound and outbound JMS Gateways for request and reply operations.
The inbound gateway relies on one of Spring&#8217;s <code>MessageListener</code> container implementations for message-driven reception.
It is also capable of sending a return value to the <code>reply-to</code> destination, as provided by the received message.
The outbound gateway sends a JMS message to a <code>request-destination</code> (or <code>request-destination-name</code> or <code>request-destination-expression</code>) and then receives a reply message.
You can explicitly configure the <code>reply-destination</code> reference (or <code>reply-destination-name</code> or <code>reply-destination-expression</code>).
Otherwise, the outbound gateway uses a JMS <a href="https://javadoc.io/doc/jakarta.jms/jakarta.jms-api/latest/jakarta/jms/TemporaryQueue.html">TemporaryQueue</a>.</p>
</div>
<div class="paragraph">
<p>Prior to Spring Integration 2.2, if necessary, a <code>TemporaryQueue</code> was created (and removed) for each request or reply.
Beginning with Spring Integration 2.2, you can configure the outbound gateway to use a <code>MessageListener</code> container to receive replies instead of directly using a new (or cached) <code>Consumer</code> to receive the reply for each request.
When so configured, and no explicit reply destination is provided, a single <code>TemporaryQueue</code> is used for each gateway instead of one for each request.</p>
</div>
<div class="paragraph">
<p>Starting with version 6.0, the outbound gateway creates a <code>TemporaryTopic</code> instead of <code>TemporaryQueue</code> if <code>replyPubSubDomain</code> option is set to <code>true</code>.
Some JMS vendors handle these destinations differently.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jms-inbound-channel-adapter"><a class="anchor" href="#jms-inbound-channel-adapter"></a>Inbound Channel Adapter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The inbound channel adapter requires a reference to either a single <code>JmsTemplate</code> instance or both a <code>ConnectionFactory</code> and a <code>Destination</code> (you can provide a 'destinationName' in place of the 'destination' reference).
The following example defines an inbound channel adapter with a <code>Destination</code> reference:</p>
</div>
<div id="_tabs_2" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_2_java_dsl" class="tab">
<p>Java DSL</p>
</li>
<li id="_tabs_2_kotlin_dsl" class="tab">
<p>Kotlin DSL</p>
</li>
<li id="_tabs_2_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_2_xml" class="tab">
<p>XML</p>
</li>
</ul>
</div>
<div id="_tabs_2_java_dsl--panel" class="tabpanel" aria-labelledby="_tabs_2_java_dsl">
<div class="listingblock primary">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Bean
public IntegrationFlow jmsInbound(ConnectionFactory connectionFactory) {
    return IntegrationFlow.from(
                    Jms.inboundAdapter(connectionFactory)
                       .destination("inQueue"),
                    e -&gt; e.poller(poller -&gt; poller.fixedRate(30000)))
            .handle(m -&gt; System.out.println(m.getPayload()))
            .get();
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_2_kotlin_dsl--panel" class="tabpanel" aria-labelledby="_tabs_2_kotlin_dsl">
<div class="listingblock secondary">
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="kotlin">@Bean
fun jmsInbound(connectionFactory: ConnectionFactory) =
    integrationFlow(
            Jms.inboundAdapter(connectionFactory).destination("inQueue"),
            { poller { Pollers.fixedRate(30000) } })
       {
            handle { m -&gt; println(m.payload) }
       }</code></pre>
</div>
</div>
</div>
<div id="_tabs_2_java--panel" class="tabpanel" aria-labelledby="_tabs_2_java">
<div class="listingblock secondary">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Bean
@InboundChannelAdapter(value = "exampleChannel", poller = @Poller(fixedRate = "30000"))
public MessageSource&lt;Object&gt; jmsIn(ConnectionFactory connectionFactory) {
    JmsDestinationPollingSource source = new JmsDestinationPollingSource(new JmsTemplate(connectionFactory));
    source.setDestinationName("inQueue");
    return source;
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_2_xml--panel" class="tabpanel" aria-labelledby="_tabs_2_xml">
<div class="listingblock secondary">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;int-jms:inbound-channel-adapter id="jmsIn" destination="inQueue" channel="exampleChannel"&gt;
    &lt;int:poller fixed-rate="30000"/&gt;
&lt;/int-jms:inbound-channel-adapter&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Notice from the preceding configuration that the <code>inbound-channel-adapter</code> is a polling consumer.
That means that it invokes <code>receive()</code> when triggered.
You should use this should only in situations where polling is done relatively infrequently and timeliness is not important.
For all other situations (a vast majority of JMS-based use-cases), the <code>message-driven-channel-adapter</code> (<a href="changes-2.2-3.0.html#x3.0-jms-mdca-te" class="xref page">described later</a>) is a better option.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default, all JMS adapters that require a reference to the <code>ConnectionFactory</code> automatically look for a bean named <code>jmsConnectionFactory</code>.
That is why you do not see a <code>connection-factory</code> attribute in many of the examples.
However, if your JMS <code>ConnectionFactory</code> has a different bean name, you need to provide that attribute.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If <code>extract-payload</code> is set to <code>true</code> (the default), the received JMS Message is passed through the <code>MessageConverter</code>.
When relying on the default <code>SimpleMessageConverter</code>, this means that the resulting Spring Integration Message has the JMS message&#8217;s body as its payload.
A JMS <code>TextMessage</code> produces a string-based payload, a JMS <code>BytesMessage</code> produces a byte array payload, and the serializable instance of a JMS <code>ObjectMessage</code> becomes the Spring Integration message&#8217;s payload.
If you prefer to have the raw JMS message as the Spring Integration message&#8217;s payload, set the <code>extractPayload</code> option to <code>false</code>.</p>
</div>
<div class="paragraph">
<p>Starting with version 5.0.8, a default value of the <code>receive-timeout</code> is <code>-1</code> (no wait) for the <code>org.springframework.jms.connection.CachingConnectionFactory</code> and <code>cacheConsumers</code>, otherwise it is 1 second.
The JMS Inbound Channel Adapter crates a <code>DynamicJmsTemplate</code> based on the provided <code>ConnectionFactory</code> and options.
If an external <code>JmsTemplate</code> is required (e.g. in Spring Boot environment), or <code>ConnectionFactory</code> is not caching, or no <code>cacheConsumers</code>, it is recommended to set <code>jmsTemplate.receiveTimeout(-1)</code> if a non-blocking consumption is expected:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Jms.inboundAdapter(connectionFactory)
        .destination(queueName)
        .configureJmsTemplate(template -&gt; template.receiveTimeout(-1))</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="jms-ib-transactions"><a class="anchor" href="#jms-ib-transactions"></a>Transactions</h3>
<div class="paragraph">
<p>Starting with version 4.0, the inbound channel adapter supports the <code>session-transacted</code> attribute.
In earlier versions, you had to inject a <code>JmsTemplate</code> with <code>sessionTransacted</code> set to <code>true</code>.
(The adapter did let you set the <code>acknowledge</code> attribute to <code>transacted</code>, but this was incorrect and did not work).</p>
</div>
<div class="paragraph">
<p>Note, however, that setting <code>session-transacted</code> to <code>true</code> has little value, because the transaction is committed
immediately after the <code>receive()</code> operation and before the message is sent to the <code>channel</code>.</p>
</div>
<div class="paragraph">
<p>If you want the entire flow to be transactional (for example, if there is a downstream outbound channel adapter), you must use a <code>transactional</code> poller with a <code>JmsTransactionManager</code>.
Alternatively, consider using a <code>jms-message-driven-channel-adapter</code> with <code>acknowledge</code> set to <code>transacted</code> (the default).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jms-message-driven-channel-adapter"><a class="anchor" href="#jms-message-driven-channel-adapter"></a>Message-driven Channel Adapter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>message-driven-channel-adapter</code> requires a reference to either an instance of a Spring <code>MessageListener</code> container (any subclass of <code>AbstractMessageListenerContainer</code>) or both <code>ConnectionFactory</code> and <code>Destination</code> (a 'destinationName' can be provided in place of the 'destination' reference).
The following example defines a message-driven channel adapter with a <code>Destination</code> reference:</p>
</div>
<div id="_tabs_3" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_3_java_dsl" class="tab">
<p>Java DSL</p>
</li>
<li id="_tabs_3_kotlin_dsl" class="tab">
<p>Kotlin DSL</p>
</li>
<li id="_tabs_3_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_3_xml" class="tab">
<p>XML</p>
</li>
</ul>
</div>
<div id="_tabs_3_java_dsl--panel" class="tabpanel" aria-labelledby="_tabs_3_java_dsl">
<div class="listingblock primary">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Bean
public IntegrationFlow jmsMessageDrivenRedeliveryFlow() {
    return IntegrationFlow
            .from(Jms.messageDrivenChannelAdapter(jmsConnectionFactory())
                     .destination("inQueue"))
            .channel("exampleChannel")
            .get();
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_3_kotlin_dsl--panel" class="tabpanel" aria-labelledby="_tabs_3_kotlin_dsl">
<div class="listingblock secondary">
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="kotlin">@Bean
fun jmsMessageDrivenFlowWithContainer() =
        integrationFlow(
                Jms.messageDrivenChannelAdapter(jmsConnectionFactory())
                             .destination("inQueue")) {
            channel("exampleChannel")
        }</code></pre>
</div>
</div>
</div>
<div id="_tabs_3_java--panel" class="tabpanel" aria-labelledby="_tabs_3_java">
<div class="listingblock secondary">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Bean
public JmsMessageDrivenEndpoint jmsIn() {
    JmsMessageDrivenEndpoint endpoint = new JmsMessageDrivenEndpoint(container(), listener());
    return endpoint;
}
@Bean
public AbstractMessageListenerContainer container() {
    DefaultMessageListenerContainer container = new DefaultMessageListenerContainer();
    container.setConnectionFactory(cf());
    container.setDestinationName("inQueue");
    return container;
}

@Bean
public ChannelPublishingJmsMessageListener listener() {
    ChannelPublishingJmsMessageListener listener = new ChannelPublishingJmsMessageListener();
    listener.setRequestChannelName("exampleChannel");
    return listener;
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_3_xml--panel" class="tabpanel" aria-labelledby="_tabs_3_xml">
<div class="listingblock secondary">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;int-jms:message-driven-channel-adapter id="jmsIn" destination="inQueue" channel="exampleChannel"/&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The message-driven adapter also accepts several properties that pertain to the <code>MessageListener</code> container.
These values are considered only if you do not provide a <code>container</code> reference.
In that case, an instance of <code>DefaultMessageListenerContainer</code> is created and configured based on these properties.
For example, you can specify the <code>transaction-manager</code> reference, the <code>concurrent-consumers</code> value, and several other property references and values.
See the <a href="https://docs.spring.io/spring-integration/api/index.html">Javadoc</a> and Spring Integration&#8217;s JMS schema (<code>spring-integration-jms.xsd</code>) for more details.</p>
</div>
<div class="paragraph">
<p>If you have a custom listener container implementation (usually a subclass of <code>DefaultMessageListenerContainer</code>), you can either provide a reference to an instance of it by using the <code>container</code> attribute or provide its fully qualified class name by using the <code>container-class</code> attribute.
In that case, the attributes on the adapter are transferred to an instance of your custom container.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can&#8217;t use the Spring JMS namespace element <code>&lt;jms:listener-container/&gt;</code> to configure a container reference for the <code>&lt;int-jms:message-driven-channel-adapter&gt;</code> since that element doesn&#8217;t actually reference a container.
Each <code>&lt;jms:listener/&gt;</code> sub-element gets its own <code>DefaultMessageListenerContainer</code> (with shared attributes defined on the parent <code>&lt;jms:listener-container/&gt;</code> element).
You can give each listener sub-element an <code>id</code>, and use that to inject into the channel adapter, however, the <code>&lt;jms:/&gt;</code> namespace requires a real listener.</p>
</div>
<div class="paragraph">
<p>It is recommended to configure a regular <code>&lt;bean&gt;</code> for the <code>DefaultMessageListenerContainer</code> and use it as a reference in the channel adapter.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Starting with version 4.2, the default <code>acknowledge</code> mode is <code>transacted</code>, unless you provide an external container.
In that case, you should configure the container as needed.
We recommend using <code>transacted</code> with the <code>DefaultMessageListenerContainer</code> to avoid message loss.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The 'extract-payload' property has the same effect, and its default value is 'true'.
The <code>poller</code> element is not applicable for a message-driven channel adapter, as it is actively invoked.
For most scenarios, the message-driven approach is better, since the messages are passed along to the <code>MessageChannel</code> as soon as they are received from the underlying JMS consumer.</p>
</div>
<div class="paragraph">
<p>Finally, the <code>&lt;message-driven-channel-adapter&gt;</code> element also accepts the 'error-channel' attribute.
This provides the same basic functionality, as described in <a href="gateway.html#gateway-proxy" class="xref page">Enter the <code>GatewayProxyFactoryBean</code></a>.
The following example shows how to set an error channel on a message-driven channel adapter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;int-jms:message-driven-channel-adapter id="jmsIn" destination="inQueue"
    channel="exampleChannel"
    error-channel="exampleErrorChannel"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>When comparing the preceding example to the generic gateway configuration or the JMS 'inbound-gateway' that we discuss later, the key difference is that we are in a one-way flow, since this is a 'channel-adapter', not a gateway.
Therefore, the flow downstream from the 'error-channel' should also be one-way.
For example, it could send to a logging handler, or it could connect to a different JMS <code>&lt;outbound-channel-adapter&gt;</code> element.</p>
</div>
<div class="paragraph">
<p>When consuming from topics, set the <code>pub-sub-domain</code> attribute to true.
Set <code>subscription-durable</code> to <code>true</code> for a durable subscription or <code>subscription-shared</code> for a shared subscription (which requires a JMS 2.0 broker and has been available since version 4.2).
Use <code>subscription-name</code> to name the subscription.</p>
</div>
<div class="paragraph">
<p>Starting with version 5.1, when the endpoint is stopped while the application remains running, the underlying listener container is shut down, closing its shared connection and consumers.
Previously, the connection and consumers remained open.
To revert to the previous behavior, set the <code>shutdownContainerOnStop</code> on the <code>JmsMessageDrivenEndpoint</code> to <code>false</code>.</p>
</div>
<div class="sect2">
<h3 id="jms-md-conversion-errors"><a class="anchor" href="#jms-md-conversion-errors"></a>Inbound Conversion Errors</h3>
<div class="paragraph">
<p>Starting with version 4.2, the 'error-channel' is used for the conversion errors, too.
Previously, if a JMS <code>&lt;message-driven-channel-adapter/&gt;</code> or <code>&lt;inbound-gateway/&gt;</code> could not deliver a message due to a conversion error, an exception would be thrown back to the container.
If the container is configured to use transactions, the message is rolled back and redelivered repeatedly.
The conversion process occurs before and during message construction so that such errors are not sent to the 'error-channel'.
Now such conversion exceptions result in an <code>ErrorMessage</code> being sent to the 'error-channel', with the exception as the <code>payload</code>.
If you wish the transaction to roll back, and you have an 'error-channel' defined, the integration flow on the 'error-channel' must re-throw the exception (or another exception).
If the error flow does not throw an exception, the transaction is committed and the message is removed.
If no 'error-channel' is defined, the exception is thrown back to the container, as before.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jms-outbound-channel-adapter"><a class="anchor" href="#jms-outbound-channel-adapter"></a>Outbound Channel Adapter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>JmsSendingMessageHandler</code> implements the <code>MessageHandler</code> interface and is capable of converting Spring Integration <code>Messages</code> to JMS messages and then sending to a JMS destination.
It requires either a <code>jmsTemplate</code> reference or both <code>jmsConnectionFactory</code> and <code>destination</code> references (<code>destinationName</code> may be provided in place of <code>destination</code>).
As with the inbound channel adapter, the easiest way to configure this adapter is with the namespace support.
The following configuration produces an adapter that receives Spring Integration messages from the <code>exampleChannel</code>, converts those into JMS messages, and sends them to the JMS destination reference whose bean name is <code>outQueue</code>:</p>
</div>
<div id="_tabs_4" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_4_java_dsl" class="tab">
<p>Java DSL</p>
</li>
<li id="_tabs_4_kotlin_dsl" class="tab">
<p>Kotlin DSL</p>
</li>
<li id="_tabs_4_groovy_dsl" class="tab">
<p>Groovy DSL</p>
</li>
<li id="_tabs_4_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_4_xml" class="tab">
<p>XML</p>
</li>
</ul>
</div>
<div id="_tabs_4_java_dsl--panel" class="tabpanel" aria-labelledby="_tabs_4_java_dsl">
<div class="listingblock primary">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Bean
public IntegrationFlow jmsOutboundFlow() {
    return IntegrationFlow.from("exampleChannel")
                .handle(Jms.outboundAdapter(cachingConnectionFactory())
                    .destinationExpression("headers." + SimpMessageHeaderAccessor.DESTINATION_HEADER)
                    .configureJmsTemplate(t -&gt; t.id("jmsOutboundFlowTemplate")));
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_4_kotlin_dsl--panel" class="tabpanel" aria-labelledby="_tabs_4_kotlin_dsl">
<div class="listingblock secondary">
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="kotlin">@Bean
fun jmsOutboundFlow() =
        integrationFlow("exampleChannel") {
            handle(Jms.outboundAdapter(jmsConnectionFactory())
                    .apply {
                        destinationExpression("headers." + SimpMessageHeaderAccessor.DESTINATION_HEADER)
                        deliveryModeFunction&lt;Any&gt; { DeliveryMode.NON_PERSISTENT }
                        timeToLiveExpression("10000")
                        configureJmsTemplate { it.explicitQosEnabled(true) }
                    }
            )
        }</code></pre>
</div>
</div>
</div>
<div id="_tabs_4_groovy_dsl--panel" class="tabpanel" aria-labelledby="_tabs_4_groovy_dsl">
<div class="listingblock secondary">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">@Bean
jmsOutboundFlow() {
    integrationFlow('exampleChannel') {
        handle(Jms.outboundAdapter(new ActiveMQConnectionFactory())
                .with {
                    destinationExpression 'headers.' + SimpMessageHeaderAccessor.DESTINATION_HEADER
                    deliveryModeFunction { DeliveryMode.NON_PERSISTENT }
                    timeToLiveExpression '10000'
                    configureJmsTemplate {
                        it.explicitQosEnabled true
                    }
                }
        )
    }
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_4_java--panel" class="tabpanel" aria-labelledby="_tabs_4_java">
<div class="listingblock secondary">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Bean
@ServiceActivator(inputChannel = "exampleChannel")
public MessageHandler jmsOut() {
    JmsSendingMessageHandler handler = new JmsSendingMessageHandler(new JmsTemplate(connectionFactory));
    handler.setDestinationName("outQueue");
    return handler;
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_4_xml--panel" class="tabpanel" aria-labelledby="_tabs_4_xml">
<div class="listingblock secondary">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;int-jms:outbound-channel-adapter id="jmsOut" destination="outQueue" channel="exampleChannel"/&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>As with the inbound channel adapters, there is an 'extract-payload' property.
However, the meaning is reversed for the outbound adapter.
Rather than applying to the JMS message, the boolean property applies to the Spring Integration message payload.
In other words, the decision is whether to pass the Spring Integration message itself as the JMS message body or to pass the Spring Integration message payload as the JMS message body.
The default value is 'true'.
Therefore, if you pass a Spring Integration message whose payload is a <code>String</code>, a JMS <code>TextMessage</code> is created.
If, on the other hand, you want to send the actual Spring Integration message to another system over JMS, set it to 'false'.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Regardless of the boolean value for payload extraction, the Spring Integration <code>MessageHeaders</code> map to JMS properties, as long as you rely on the default converter or provide a reference to another instance of <code>MessageConverter</code>.
(The same holds true for 'inbound' adapters, except that, in those cases, the JMS properties map to Spring Integration <code>MessageHeaders</code>).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Starting with version 5.1, the <code>&lt;int-jms:outbound-channel-adapter&gt;</code> (<code>JmsSendingMessageHandler</code>) can be configured with the <code>deliveryModeExpression</code> and <code>timeToLiveExpression</code> properties to evaluate an appropriate QoS values for JMS message to send at runtime against request Spring <code>Message</code>.
The new <code>setMapInboundDeliveryMode(true)</code> and <code>setMapInboundExpiration(true)</code> options of the <code>DefaultJmsHeaderMapper</code> may facilitate as a source of the information for the dynamic <code>deliveryMode</code> and <code>timeToLive</code> from message headers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;int-jms:outbound-channel-adapter delivery-mode-expression="headers.jms_deliveryMode"
                        time-to-live-expression="headers.jms_expiration - T(System).currentTimeMillis()"/&gt;</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="jms-ob-transactions"><a class="anchor" href="#jms-ob-transactions"></a>Transactions</h3>
<div class="paragraph">
<p>Starting with version 4.0, the outbound channel adapter supports the <code>session-transacted</code> attribute.
In earlier versions, you had to inject a <code>JmsTemplate</code> with <code>sessionTransacted</code> set to <code>true</code>.
The attribute now sets the property on the built-in default <code>JmsTemplate</code>.
If a transaction exists (perhaps from an upstream <code>message-driven-channel-adapter</code>), the send operation is performed within the same transaction.
Otherwise, a new transaction is started.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jms-inbound-gateway"><a class="anchor" href="#jms-inbound-gateway"></a>Inbound Gateway</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Integration&#8217;s message-driven JMS inbound-gateway delegates to a <code>MessageListener</code> container, supports dynamically adjusting concurrent consumers, and can also handle replies.
The inbound gateway requires references to a <code>ConnectionFactory</code> and a request <code>Destination</code> (or 'requestDestinationName').
The following example defines a JMS <code>inbound-gateway</code> that receives from the JMS queue referenced by the bean id, <code>inQueue</code>, and sends to the Spring Integration channel named <code>exampleChannel</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;int-jms:inbound-gateway id="jmsInGateway"
    request-destination="inQueue"
    request-channel="exampleChannel"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since the gateways provide request-reply behavior instead of unidirectional send or receive behavior, they also have two distinct properties for &#8220;payload extraction&#8221; (as <a href="changes-3.0-4.0.html#x4.0-jms-ib" class="xref page">discussed earlier</a> for the channel adapters' 'extract-payload' setting).
For an inbound gateway, the 'extract-request-payload' property determines whether the received JMS Message body is extracted.
If 'false', the JMS message itself becomes the Spring Integration message payload.
The default is 'true'.</p>
</div>
<div class="paragraph">
<p>Similarly, for an inbound-gateway, the 'extract-reply-payload' property applies to the Spring Integration message that is to be converted into a reply JMS Message.
If you want to pass the whole Spring Integration message (as the body of a JMS ObjectMessage), set value this to 'false'.
By default, it is also 'true' that the Spring Integration message payload is converted into a JMS Message (for example, a <code>String</code> payload becomes a JMS TextMessage).</p>
</div>
<div class="paragraph">
<p>As with anything else, gateway invocation might result in error.
By default, a producer is not notified of the errors that might have occurred on the consumer side and times out waiting for the reply.
However, there might be times when you want to communicate an error condition back to the consumer (in other words, you might want to treat the exception as a valid reply by mapping it to a message).
To accomplish this, JMS inbound gateway provides support for a message channel to which errors can be sent for processing, potentially resulting in a reply message payload that conforms to some contract that defines what a caller may expect as an &#8220;error&#8221; reply.
You can use the error-channel attribute to configure such a channel, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;int-jms:inbound-gateway request-destination="requestQueue"
          request-channel="jmsInputChannel"
          error-channel="errorTransformationChannel"/&gt;

&lt;int:transformer input-channel="exceptionTransformationChannel"
        ref="exceptionTransformer" method="createErrorResponse"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You might notice that this example looks very similar to that included within <a href="gateway.html#gateway-proxy" class="xref page">Enter the <code>GatewayProxyFactoryBean</code></a>.
The same idea applies here: The <code>exceptionTransformer</code> could be a POJO that creates error-response objects, you could reference the <code>nullChannel</code> to suppress the errors, or you could leave 'error-channel' out to let the exception propagate.</p>
</div>
<div class="paragraph">
<p>See <a href="#jms-md-conversion-errors">Inbound Conversion Errors</a>.</p>
</div>
<div class="paragraph">
<p>When consuming from topics, set the <code>pub-sub-domain</code> attribute to true.
Set <code>subscription-durable</code> to <code>true</code> for a durable subscription or <code>subscription-shared</code> for a shared subscription (requires a JMS 2.0 broker and has been available since version 4.2).
Use <code>subscription-name</code> to name the subscription.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Starting with version 4.2, the default <code>acknowledge</code> mode is <code>transacted</code>, unless an external container is provided.
In that case, you should configure the container as needed.
We recommend that you use <code>transacted</code> with the <code>DefaultMessageListenerContainer</code> to avoid message loss.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Starting with version 5.1, when the endpoint is stopped while the application remains running, the underlying listener container is shut down, closing its shared connection and consumers.
Previously, the connection and consumers remained open.
To revert to the previous behavior, set the <code>shutdownContainerOnStop</code> on the <code>JmsInboundGateway</code> to <code>false</code>.</p>
</div>
<div class="paragraph">
<p>By default, the <code>JmsInboundGateway</code> looks for a <code>jakarta.jms.Message.getJMSReplyTo()</code> property in the received message to determine where to send a reply.
Otherwise, it can be configured with a static <code>defaultReplyDestination</code>, or <code>defaultReplyQueueName</code> or <code>defaultReplyTopicName</code>.
In addition, starting with version 6.1, a <code>replyToExpression</code> can be configured on a provided <code>ChannelPublishingJmsMessageListener</code> to determine the reply destination dynamically, if the standard <code>JMSReplyTo</code> property is <code>null</code> on the request.
The received <code>jakarta.jms.Message</code> is used the root evaluation context object.
The following example demonstrates how to use Java DSL API to configure an inbound JMS gateway with a custom reply destination resolved from the request message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Bean
public IntegrationFlow jmsInboundGatewayFlow(ConnectionFactory connectionFactory) {
    return IntegrationFlow.from(
                    Jms.inboundGateway(connectionFactory)
                            .requestDestination("requestDestination")
                            .replyToFunction(message -&gt; message.getStringProperty("myReplyTo")))
            .&lt;String, String&gt;transform(String::toUpperCase)
            .get();
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jms-outbound-gateway"><a class="anchor" href="#jms-outbound-gateway"></a>Outbound Gateway</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The outbound gateway creates JMS messages from Spring Integration messages and sends them to a <code>request-destination</code>.
It then handles the JMS reply message either by using a selector to receive from the <code>reply-destination</code> that you configure or, if no <code>reply-destination</code> is provided, by creating JMS <code>TemporaryQueue</code> (or <code>TemporaryTopic</code> if <code>replyPubSubDomain= true</code>) instances.</p>
</div>
<div id="jms-outbound-gateway-memory-caution" class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Using a <code>reply-destination</code> (or <code>reply-destination-name</code>) together with a <code>CachingConnectionFactory</code> that has cacheConsumers set to <code>true</code> can cause out-of-memory conditions.
This is because each request gets a new consumer with a new selector (selecting on the <code>correlation-key</code> value or when there is no <code>correlation-key</code>, on the sent JMSMessageID).
Given that these selectors are unique, they remain in the cache (unused) after the current request completes.</p>
</div>
<div class="paragraph">
<p>If you specify a reply destination, you are advised to not use cached consumers.
Alternatively, consider using a <code>&lt;reply-listener/&gt;</code> as <a href="#jms-outbound-gateway-reply-listener">described below</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following example shows how to configure an outbound gateway:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;int-jms:outbound-gateway id="jmsOutGateway"
    request-destination="outQueue"
    request-channel="outboundJmsRequests"
    reply-channel="jmsReplies"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The 'outbound-gateway' payload extraction properties are inversely related to those of the 'inbound-gateway' (see the <a href="changes-2.2-3.0.html#x3.0-jms-mdca-te" class="xref page">earlier discussion</a>).
That means that the 'extract-request-payload' property value applies to the Spring Integration message being converted into a JMS message to be sent as a request.
The 'extract-reply-payload' property value applies to the JMS message received as a reply and is then converted into a Spring Integration message to be subsequently sent to the 'reply-channel', as shown in the preceding configuration example.</p>
</div>
<div class="sect2">
<h3 id="jms-outbound-gateway-reply-listener"><a class="anchor" href="#jms-outbound-gateway-reply-listener"></a>Using a <code>&lt;reply-listener/&gt;</code></h3>
<div class="paragraph">
<p>Spring Integration 2.2 introduced an alternative technique for handling replies.
If you add a <code>&lt;reply-listener/&gt;</code> child element to the gateway instead of creating a consumer for each reply, a <code>MessageListener</code> container is used to receive the replies and hand them over to the requesting thread.
This provides a number of performance benefits as well as alleviating the cached consumer memory utilization problem described in the <a href="#jms-outbound-gateway-memory-caution">earlier caution</a>.</p>
</div>
<div class="paragraph">
<p>When using a <code>&lt;reply-listener/&gt;</code> with an outbound gateway that has no <code>reply-destination</code>, instead of creating a <code>TemporaryQueue</code> for each request, a single <code>TemporaryQueue</code> is used.
(The gateway creates an additional <code>TemporaryQueue</code>, as necessary, if the connection to the broker is lost and recovered).
If <code>replyPubSubDomain</code> is set to <code>true</code>, starting with version 6.0, a <code>TemporaryTopic</code> is created instead.</p>
</div>
<div class="paragraph">
<p>When using a <code>correlation-key</code>, multiple gateways can share the same reply destination, because the listener container uses a selector that is unique to each gateway.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you specify a reply listener and specify a reply destination (or reply destination name) but provide no correlation key, the gateway logs a warning and falls back to pre-version 2.2 behavior.
This is because there is no way to configure a selector in this case.
Thus, there is no way to avoid a reply going to a different gateway that might be configured with the same reply destination.</p>
</div>
<div class="paragraph">
<p>Note that, in this situation, a new consumer is used for each request, and consumers can build up in memory as described in the caution above; therefore cached consumers should not be used in this case.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following example shows a reply listener with default attributes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;int-jms:outbound-gateway id="jmsOutGateway"
        request-destination="outQueue"
        request-channel="outboundJmsRequests"
        reply-channel="jmsReplies"&gt;
    &lt;int-jms:reply-listener /&gt;
&lt;/int-jms-outbound-gateway&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The listener is very lightweight, and we anticipate that, in most cases, you need only a single consumer.
However, you can add attributes such as <code>concurrent-consumers</code>, <code>max-concurrent-consumers</code>, and others.
See the schema for a complete list of supported attributes, together with the <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/html/jms.html">Spring JMS documentation</a> for their meanings.</p>
</div>
</div>
<div class="sect2">
<h3 id="idle-reply-listeners"><a class="anchor" href="#idle-reply-listeners"></a>Idle Reply Listeners</h3>
<div class="paragraph">
<p>Starting with version 4.2, you can start the reply listener as needed (and stop it after an idle time) instead of running for the duration of the gateway&#8217;s lifecycle.
This can be useful if you have many gateways in the application context where they are mostly idle.
One such situation is a context with many (inactive) partitioned <a href="https://spring.io/projects/spring-batch">Spring Batch</a> jobs using Spring Integration and JMS for partition distribution.
If all the reply listeners are active, the JMS broker has an active consumer for each gateway.
By enabling the idle timeout, each consumer exists only while the corresponding batch job is running (and for a short time after it finishes).</p>
</div>
<div class="paragraph">
<p>See <code>idle-reply-listener-timeout</code> in <a href="#jms-og-attributes">Attribute Reference</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="gateway-reply-correlation"><a class="anchor" href="#gateway-reply-correlation"></a>Gateway Reply Correlation</h3>
<div class="paragraph">
<p>This section describes the mechanisms used for reply correlation (ensuring the originating gateway receives replies to only its requests), depending on how the gateway is configured.
See <a href="#jms-og-attributes">Attribute Reference</a> for complete description of the attributes discussed here.</p>
</div>
<div class="paragraph">
<p>The following list describes the various scenarios (the numbers are for identification&#8201;&#8212;&#8201;order does not matter):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No <code>reply-destination*</code> properties and no <code>&lt;reply-listener&gt;</code></p>
<div class="paragraph">
<p>A <code>TemporaryQueue</code> is created for each request and deleted when the request is complete (successfully or otherwise).
<code>correlation-key</code> is irrelevant.</p>
</div>
</li>
<li>
<p>A <code>reply-destination*</code> property is provided and neither a <code>&lt;reply-listener/&gt;</code> nor a <code>correlation-key</code> is provided</p>
<div class="paragraph">
<p>The <code>JMSCorrelationID</code> equal to the outgoing message is used as a message selector for the consumer:</p>
</div>
<div class="paragraph">
<p><code>messageSelector = "JMSCorrelationID = '" + messageId + "'"</code></p>
</div>
<div class="paragraph">
<p>The responding system is expected to return the inbound <code>JMSMessageID</code> in the reply <code>JMSCorrelationID</code>.
This is a common pattern and is implemented by the Spring Integration inbound gateway as well as Spring&#8217;s <code>MessageListenerAdapter</code> for message-driven POJOs.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When you use this configuration, you should not use a topic for replies.
The reply may be lost.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>A <code>reply-destination*</code> property is provided, no <code>&lt;reply-listener/&gt;</code> is provided, and <code>correlation-key="JMSCorrelationID"</code></p>
<div class="paragraph">
<p>The gateway generates a unique correlation IS and inserts it in the <code>JMSCorrelationID</code> header.
The message selector is:</p>
</div>
<div class="paragraph">
<p><code>messageSelector = "JMSCorrelationID = '" + uniqueId + "'"</code></p>
</div>
<div class="paragraph">
<p>The responding system is expected to return the inbound <code>JMSCorrelationID</code> in the reply <code>JMSCorrelationID</code>.
This is a common pattern and is implemented by the Spring Integration inbound gateway as well as Spring&#8217;s <code>MessageListenerAdapter</code> for message-driven POJOs.</p>
</div>
</li>
<li>
<p>A <code>reply-destination*</code> property is provided, no <code>&lt;reply-listener/&gt;</code> is provided, and <code>correlation-key="myCorrelationHeader"</code></p>
<div class="paragraph">
<p>The gateway generates a unique correlation ID and inserts it in the <code>myCorrelationHeader</code> message property.
The <code>correlation-key</code> can be any user-defined value.
The message selector is:</p>
</div>
<div class="paragraph">
<p><code>messageSelector = "myCorrelationHeader = '" + uniqueId + "'"</code></p>
</div>
<div class="paragraph">
<p>The responding system is expected to return the inbound <code>myCorrelationHeader</code> in the reply <code>myCorrelationHeader</code>.</p>
</div>
</li>
<li>
<p>A <code>reply-destination*</code> property is provided, no <code>&lt;reply-listener/&gt;</code> is provided, and <code>correlation-key="JMSCorrelationID*"</code>
(Note the <code>*</code> in the correlation key.)</p>
<div class="paragraph">
<p>The gateway uses the value in the <code>jms_correlationId</code> header (if present) from the request message and inserts it in the <code>JMSCorrelationID</code> header.
The message selector is:</p>
</div>
<div class="paragraph">
<p><code>messageSelector = "JMSCorrelationID = '" + headers['jms_correlationId'] + "'"</code></p>
</div>
<div class="paragraph">
<p>The user must ensure this value is unique.</p>
</div>
<div class="paragraph">
<p>If the header does not exist, the gateway behaves as in <code>3</code>.</p>
</div>
<div class="paragraph">
<p>The responding system is expected to return the inbound <code>JMSCorrelationID</code> in the reply <code>JMSCorrelationID</code>.
This is a common pattern and is implemented by the Spring Integration inbound gateway as well as Spring&#8217;s <code>MessageListenerAdapter</code> for message-driven POJOs.</p>
</div>
</li>
<li>
<p>No <code>reply-destination*</code> properties is provided, and a <code>&lt;reply-listener&gt;</code> is provided</p>
<div class="paragraph">
<p>A temporary queue is created and used for all replies from this gateway instance.
No correlation data is needed in the message, but the outgoing <code>JMSMessageID</code> is used internally in the gateway to direct the reply to the correct requesting thread.</p>
</div>
</li>
<li>
<p>A <code>reply-destination*</code> property is provided, a <code>&lt;reply-listener&gt;</code> is provided, and no <code>correlation-key</code> is provided</p>
<div class="paragraph">
<p>Not allowed.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;reply-listener/&gt;</code> configuration is ignored, and the gateway behaves as in <code>2</code>.
A warning log message is written to indicate this situation.</p>
</div>
</li>
<li>
<p>A <code>reply-destination*</code> property is provided, a <code>&lt;reply-listener&gt;</code> is provided, and <code>correlation-key="JMSCorrelationID"</code></p>
<div class="paragraph">
<p>The gateway has a unique correlation ID and inserts it, together with an incrementing value in the <code>JMSCorrelationID</code> header (<code>gatewayId + "_" + ++seq</code>).
The message selector is:</p>
</div>
<div class="paragraph">
<p><code>messageSelector = "JMSCorrelationID LIKE '" + gatewayId%'"</code></p>
</div>
<div class="paragraph">
<p>The responding system is expected to return the inbound <code>JMSCorrelationID</code> in the reply <code>JMSCorrelationID</code>.
This is a common pattern and is implemented by the Spring Integration inbound gateway as well as Spring&#8217;s <code>MessageListenerAdapter</code> for message-driven POJOs.
Since each gateway has a unique ID, each instance gets only its own replies.
The complete correlation data is used to route the reply to the correct requesting thread.</p>
</div>
</li>
<li>
<p>A <code>reply-destination*</code> property is provided a <code>&lt;reply-listener/&gt;</code> is provided, and <code>correlation-key="myCorrelationHeader"</code></p>
<div class="paragraph">
<p>The gateway has a unique correlation ID and inserts it, together with an incrementing value in the <code>myCorrelationHeader</code> property (<code>gatewayId + "_" + ++seq</code>).
The <code>correlation-key</code> can be any user-defined value.
The message selector is:</p>
</div>
<div class="paragraph">
<p><code>messageSelector = "myCorrelationHeader LIKE '" + gatewayId%'"</code></p>
</div>
<div class="paragraph">
<p>The responding system is expected to return the inbound <code>myCorrelationHeader</code> in the reply <code>myCorrelationHeader</code>.
Since each gateway has a unique ID, each instance only gets its own replies.
The complete correlation data is used to route the reply to the correct requesting thread.</p>
</div>
</li>
<li>
<p>A <code>reply-destination*</code> property is provided, a <code>&lt;reply-listener/&gt;</code> is provided, and <code>correlation-key="JMSCorrelationID*"</code></p>
<div class="paragraph">
<p>(Note the <code>*</code> in the correlation key)</p>
</div>
<div class="paragraph">
<p>Not allowed.</p>
</div>
<div class="paragraph">
<p>User-supplied correlation IDs are not permitted with a reply listener.
The gateway does not initialize with this configuration.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="jms-async-gateway"><a class="anchor" href="#jms-async-gateway"></a>Async Gateway</h3>
<div class="paragraph">
<p>Starting with version 4.3, you can now specify <code>async="true"</code> (or <code>setAsync(true)</code> in Java) when configuring the outbound gateway.</p>
</div>
<div class="paragraph">
<p>By default, when a request is sent to the gateway, the requesting thread is suspended until the reply is received.
The flow then continues on that thread.
If <code>async</code> is <code>true</code>, the requesting thread is released immediately after the <code>send()</code> completes, and the reply is returned (and the flow continues) on the listener container thread.
This can be useful when the gateway is invoked on a poller thread.
The thread is released and is available for other tasks within the framework.</p>
</div>
<div class="paragraph">
<p>Thee <code>async</code> requires a <code>&lt;reply-listener/&gt;</code> (or <code>setUseReplyContainer(true)</code> when using Java configuration).
It also requires a <code>correlationKey</code> (usually <code>JMSCorrelationID</code>) to be specified.
If either of these conditions are not met, <code>async</code> is ignored.</p>
</div>
</div>
<div class="sect2">
<h3 id="jms-og-attributes"><a class="anchor" href="#jms-og-attributes"></a>Attribute Reference</h3>
<div class="paragraph">
<p>The following listing shows all the available attributes for an <code>outbound-gateway</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;int-jms:outbound-gateway
    connection-factory="connectionFactory" <i class="conum" data-value="1"></i><b>(1)</b>
    correlation-key="" <i class="conum" data-value="2"></i><b>(2)</b>
    delivery-persistent="" <i class="conum" data-value="3"></i><b>(3)</b>
    destination-resolver="" <i class="conum" data-value="4"></i><b>(4)</b>
    explicit-qos-enabled="" <i class="conum" data-value="5"></i><b>(5)</b>
    extract-reply-payload="true" <i class="conum" data-value="6"></i><b>(6)</b>
    extract-request-payload="true" <i class="conum" data-value="7"></i><b>(7)</b>
    header-mapper="" <i class="conum" data-value="8"></i><b>(8)</b>
    message-converter="" <i class="conum" data-value="9"></i><b>(9)</b>
    priority="" <i class="conum" data-value="10"></i><b>(10)</b>
    receive-timeout="" <i class="conum" data-value="11"></i><b>(11)</b>
    reply-channel="" <i class="conum" data-value="12"></i><b>(12)</b>
    reply-destination="" <i class="conum" data-value="13"></i><b>(13)</b>
    reply-destination-expression="" <i class="conum" data-value="14"></i><b>(14)</b>
    reply-destination-name="" <i class="conum" data-value="15"></i><b>(15)</b>
    reply-pub-sub-domain="" <i class="conum" data-value="16"></i><b>(16)</b>
    reply-timeout="" <i class="conum" data-value="17"></i><b>(17)</b>
    request-channel="" <i class="conum" data-value="18"></i><b>(18)</b>
    request-destination="" <i class="conum" data-value="19"></i><b>(19)</b>
    request-destination-expression="" <i class="conum" data-value="20"></i><b>(20)</b>
    request-destination-name="" <i class="conum" data-value="21"></i><b>(21)</b>
    request-pub-sub-domain="" <i class="conum" data-value="22"></i><b>(22)</b>
    time-to-live="" <i class="conum" data-value="23"></i><b>(23)</b>
    requires-reply="" <i class="conum" data-value="24"></i><b>(24)</b>
    idle-reply-listener-timeout="" <i class="conum" data-value="25"></i><b>(25)</b>
    async=""&gt; <i class="conum" data-value="26"></i><b>(26)</b>
  &lt;int-jms:reply-listener /&gt; <i class="conum" data-value="27"></i><b>(27)</b>
&lt;/int-jms:outbound-gateway&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Reference to a <code>jakarta.jms.ConnectionFactory</code>.
The default <code>jmsConnectionFactory</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The name of a property that contains correlation data to correlate responses with replies.
If omitted, the gateway expects the responding system to return the value of the outbound <code>JMSMessageID</code> header in the <code>JMSCorrelationID</code> header.
If specified, the gateway generates a correlation ID and populates the specified property with it.
The responding system must echo back that value in the same property.
It can be set to <code>JMSCorrelationID</code>, in which case the standard header is used instead of a <code>String</code> property to hold the correlation data.
When you use a <code>&lt;reply-container/&gt;</code>, you must specify the <code>correlation-key</code> if you provide an explicit <code>reply-destination</code>.
Starting with version 4.0.1, this attribute also supports the value <code>JMSCorrelationID*</code>, which means that if the outbound message already has a <code>JMSCorrelationID</code> (mapped from the <code>jms_correlationId</code>) header, it is used instead of generating a new one.
Note, the <code>JMSCorrelationID*</code> key is not allowed when you use a <code>&lt;reply-container/&gt;</code>, because the container needs to set up a message selector during initialization.
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You should understand that the gateway has no way to ensure uniqueness, and unexpected side effects can occur if the provided correlation ID is not unique.
</td>
</tr>
</table>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>A boolean value indicating whether the delivery mode should be <code>DeliveryMode.PERSISTENT</code> (<code>true</code>) or <code>DeliveryMode.NON_PERSISTENT</code> (<code>false</code>).
This setting takes effect only if <code>explicit-qos-enabled</code> is <code>true</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>A <code>DestinationResolver</code>.
The default is a <code>DynamicDestinationResolver</code>, which maps the destination name to a queue or topic of that name.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>When set to <code>true</code>, it enables the use of quality of service attributes: <code>priority</code>, <code>delivery-mode</code>, and <code>time-to-live</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>When set to <code>true</code> (the default), the payload of the Spring Integration reply message is created from the JMS Reply message&#8217;s body (by using the <code>MessageConverter</code>).
When set to <code>false</code>, the entire JMS message becomes the payload of the Spring Integration message.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>When set to <code>true</code> (the default), the payload of the Spring Integration message is converted to a <code>JMSMessage</code> (by using the <code>MessageConverter</code>).
When set to <code>false</code>, the entire Spring Integration Message is converted to the <code>JMSMessage</code>.
In both cases, the Spring Integration message headers are mapped to JMS headers and properties by using the <code>HeaderMapper</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>A <code>HeaderMapper</code> used to map Spring Integration message headers to and from JMS message headers and properties.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>A reference to a <code>MessageConverter</code> for converting between JMS messages and the Spring Integration message payloads (or messages if <code>extract-request-payload</code> is <code>false</code>).
The default is a <code>SimpleMessageConverter</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>The default priority of request messages.
Overridden by the message priority header, if present.
Its range is <code>0</code> to <code>9</code>.
This setting takes effect only if <code>explicit-qos-enabled</code> is <code>true</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>The time (in milliseconds) to wait for a reply.
The default is <code>5000</code> (five seconds).</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td>The channel to which the reply message is sent.</td>
</tr>
<tr>
<td><i class="conum" data-value="13"></i><b>13</b></td>
<td>A reference to a <code>Destination</code>, which is set as the <code>JMSReplyTo</code> header.
At most, only one of <code>reply-destination</code>, <code>reply-destination-expression</code>, or <code>reply-destination-name</code> is allowed.
If none is provided, a <code>TemporaryQueue</code> is used for replies to this gateway.</td>
</tr>
<tr>
<td><i class="conum" data-value="14"></i><b>14</b></td>
<td>A SpEL expression evaluating to a <code>Destination</code>, which will be set as the <code>JMSReplyTo</code> header.
The expression can result in a <code>Destination</code> object or a <code>String</code>.
It is used by the <code>DestinationResolver</code> to resolve the actual <code>Destination</code>.
At most, only one of <code>reply-destination</code>, <code>reply-destination-expression</code>, or <code>reply-destination-name</code> is allowed.
If none is provided, a <code>TemporaryQueue</code> is used for replies to this gateway.</td>
</tr>
<tr>
<td><i class="conum" data-value="15"></i><b>15</b></td>
<td>The name of the destination that is set as the JMSReplyTo header.
It is used by the <code>DestinationResolver</code> to resolve the actual <code>Destination</code>.
At most, only one of <code>reply-destination</code>, <code>reply-destination-expression</code>, or <code>reply-destination-name</code> is allowed.
If none is provided, a <code>TemporaryQueue</code> is used for replies to this gateway.</td>
</tr>
<tr>
<td><i class="conum" data-value="16"></i><b>16</b></td>
<td>When set to <code>true</code>, it indicates that any reply <code>Destination</code> resolved by the <code>DestinationResolver</code> should be a <code>Topic</code> rather then a <code>Queue</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="17"></i><b>17</b></td>
<td>The time the gateway waits when sending the reply message to the <code>reply-channel</code>.
This only has an effect if the <code>reply-channel</code> can block&#8201;&#8212;&#8201;such as a <code>QueueChannel</code> with a capacity limit that is currently full.
The default is infinity.</td>
</tr>
<tr>
<td><i class="conum" data-value="18"></i><b>18</b></td>
<td>The channel on which this gateway receives request messages.</td>
</tr>
<tr>
<td><i class="conum" data-value="19"></i><b>19</b></td>
<td>A reference to a <code>Destination</code> to which request messages are sent.
One of <code>reply-destination</code>, <code>reply-destination-expression</code>, or <code>reply-destination-name</code> is required.
You can use only one of those three attributes.</td>
</tr>
<tr>
<td><i class="conum" data-value="20"></i><b>20</b></td>
<td>A SpEL expression evaluating to a <code>Destination</code> to which request messages are sent.
The expression can result in a <code>Destination</code> object or a <code>String</code>.
It is used by the <code>DestinationResolver</code> to resolve the actual <code>Destination</code>.
One of the <code>reply-destination</code>, <code>reply-destination-expression</code>, or <code>reply-destination-name</code> is required.
You can use only one of those three attributes.</td>
</tr>
<tr>
<td><i class="conum" data-value="21"></i><b>21</b></td>
<td>The name of the destination to which request messages are sent.
It is used by the <code>DestinationResolver</code> to resolve the actual <code>Destination</code>.
One of <code>reply-destination</code>, <code>reply-destination-expression</code>, or <code>reply-destination-name</code> is required.
You can use only one of those three attributes.</td>
</tr>
<tr>
<td><i class="conum" data-value="22"></i><b>22</b></td>
<td>When set to <code>true</code>, it indicates that any request <code>Destination</code> resolved by the <code>DestinationResolver</code> should be a <code>Topic</code> rather then a <code>Queue</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="23"></i><b>23</b></td>
<td>Specifies the message time to live.
This setting takes effect only if <code>explicit-qos-enabled</code> is <code>true</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="24"></i><b>24</b></td>
<td>Specifies whether this outbound gateway must return a non-null value.
By default, this value is <code>true</code>, and a <code>MessageTimeoutException</code> is thrown when the underlying service does not return a value after the <code>receive-timeout</code>.
Note that, if the service is never expected to return a reply, it would be better to use a <code>&lt;int-jms:outbound-channel-adapter/&gt;</code> instead of a <code>&lt;int-jms:outbound-gateway/&gt;</code> with <code>requires-reply="false"</code>.
With the latter, the sending thread is blocked, waiting for a reply for the <code>receive-timeout</code> period.</td>
</tr>
<tr>
<td><i class="conum" data-value="25"></i><b>25</b></td>
<td>When you use a <code>&lt;reply-listener /&gt;</code>, its lifecycle (start and stop) matches that of the gateway by default.
When this value is greater than <code>0</code>, the container is started on demand (when a request is sent).
The container continues to run until at least this time elapses with no requests being received (and until no replies are outstanding).
The container is started again on the next request.
The stop time is a minimum and may actually be up to 1.5x this value.</td>
</tr>
<tr>
<td><i class="conum" data-value="26"></i><b>26</b></td>
<td>See <a href="#jms-async-gateway">Async Gateway</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="27"></i><b>27</b></td>
<td>When this element is included, replies are received by an asynchronous <code>MessageListenerContainer</code> rather than creating a consumer for each reply.
This can be more efficient in many cases.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jms-header-mapping"><a class="anchor" href="#jms-header-mapping"></a>Mapping Message Headers to and from JMS Message</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JMS messages can contain meta-information such as JMS API headers and simple properties.
You can map those to and from Spring Integration message headers by using <code>JmsHeaderMapper</code>.
The JMS API headers are passed to the appropriate setter methods (such as <code>setJMSReplyTo</code>), whereas other headers are copied to the general properties of the JMS Message.
JMS outbound gateway is bootstrapped with the default implementation of <code>JmsHeaderMapper</code>, which will map standard JMS API Headers as well as primitive or <code>String</code> message headers.
You could also provide a custom header mapper by using the <code>header-mapper</code> attribute of inbound and outbound gateways.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Many JMS vendor-specific clients don&#8217;t allow setting the <code>deliveryMode</code>, <code>priority</code> and <code>timeToLive</code> properties directly on an already created JMS message.
They are considered to be QoS properties and therefore have to be propagated to the target <code>MessageProducer.send(message, deliveryMode, priority, timeToLive)</code> API.
For this reason the <code>DefaultJmsHeaderMapper</code> doesn&#8217;t map appropriate Spring Integration headers (or expression results) into the mentioned JMS message properties.
Instead, a <code>DynamicJmsTemplate</code> is used by the <code>JmsSendingMessageHandler</code> to propagate header values from the request message into the <code>MessageProducer.send()</code> API.
To enable this feature, you must configure the outbound endpoint with a <code>DynamicJmsTemplate</code> with its <code>explicitQosEnabled</code> property set to true.
The Spring Integration Java DSL configures a <code>DynamicJmsTemplate</code> by default but you must still set the <code>explicitQosEnabled</code> property.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Since version 4.0, the <code>JMSPriority</code> header is mapped to the standard <code>priority</code> header for inbound messages.
Previously, the <code>priority</code> header was only used for outbound messages.
To revert to the previous behavior (that is, to not map the inbound priority), set the <code>mapInboundPriority</code> property of <code>DefaultJmsHeaderMapper</code> to <code>false</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Since version 4.3, the <code>DefaultJmsHeaderMapper</code> maps the standard <code>correlationId</code> header as a message property by invoking its <code>toString()</code> method (<code>correlationId</code> is often a <code>UUID</code>, which is not supported by JMS).
On the inbound side, it is mapped as a <code>String</code>.
This is independent of the <code>jms_correlationId</code> header, which is mapped to and from the <code>JMSCorrelationID</code> header.
The <code>JMSCorrelationID</code> is generally used to correlate requests and replies, whereas the <code>correlationId</code> is often used to combine related messages into a group (such as with an aggregator or a resequencer).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Starting with version 5.1, the <code>DefaultJmsHeaderMapper</code> can be configured for mapping inbound <code>JMSDeliveryMode</code> and <code>JMSExpiration</code> properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Bean
public DefaultJmsHeaderMapper jmsHeaderMapper() {
    DefaultJmsHeaderMapper mapper = new DefaultJmsHeaderMapper();
    mapper.setMapInboundDeliveryMode(true)
    mapper.setMapInboundExpiration(true)
    return mapper;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>These JMS properties are mapped to the <code>JmsHeaders.DELIVERY_MODE</code> and <code>JmsHeaders.EXPIRATION</code> Spring Message headers respectively.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jms-conversion-and-marshalling"><a class="anchor" href="#jms-conversion-and-marshalling"></a>Message Conversion, Marshalling, and Unmarshalling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you need to convert the message, all JMS adapters and gateways let you provide a <code>MessageConverter</code> by setting the <code>message-converter</code> attribute.
To do so, provide the bean name of an instance of <code>MessageConverter</code> that is available within the same ApplicationContext.
Also, to provide some consistency with marshaller and unmarshaller interfaces, Spring provides <code>MarshallingMessageConverter</code>, which you can configure with your own custom marshallers and unmarshallers.
The following example shows how to do so</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;int-jms:inbound-gateway request-destination="requestQueue"
    request-channel="inbound-gateway-channel"
    message-converter="marshallingMessageConverter"/&gt;

&lt;bean id="marshallingMessageConverter"
    class="org.springframework.jms.support.converter.MarshallingMessageConverter"&gt;
    &lt;constructor-arg&gt;
        &lt;bean class="org.bar.SampleMarshaller"/&gt;
    &lt;/constructor-arg&gt;
    &lt;constructor-arg&gt;
        &lt;bean class="org.bar.SampleUnmarshaller"/&gt;
    &lt;/constructor-arg&gt;
&lt;/bean&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When you provide your own <code>MessageConverter</code> instance, it is still wrapped within the <code>HeaderMappingMessageConverter</code>.
This means that the 'extract-request-payload' and 'extract-reply-payload' properties can affect the actual objects passed to your converter.
The <code>HeaderMappingMessageConverter</code> itself delegates to a target <code>MessageConverter</code> while also mapping the Spring Integration <code>MessageHeaders</code> to JMS message properties and back again.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jms-channel"><a class="anchor" href="#jms-channel"></a>JMS-backed Message Channels</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The channel adapters and gateways featured earlier are all intended for applications that integrate with other external systems.
The inbound options assume that some other system is sending JMS messages to the JMS destination, and the outbound options assume that some other system is receiving from the destination.
The other system may or may not be a Spring Integration application.
Of course, when sending a Spring Integration message instance as the body of the JMS message itself (with 'extract-payload' value set to <code>false</code>), it is assumed that the other system is based on Spring Integration.
However, that is by no means a requirement.
That flexibility is one of the benefits of using a message-based integration option with the abstraction of &#8220;channels&#8221;( or destinations in the case of JMS).</p>
</div>
<div class="paragraph">
<p>Sometimes, both the producer and consumer for a given JMS Destination are intended to be part of the same application, running within the same process.
You can accomplish this by using a pair of inbound and outbound channel adapters.
The problem with that approach is that you need two adapters, even though, conceptually, the goal is to have a single message channel.
A better option is supported as of Spring Integration version 2.0.
Now it is possible to define a single &#8220;channel&#8221; when using the JMS namespace, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;int-jms:channel id="jmsChannel" queue="exampleQueue"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The channel in the preceding example behaves much like a normal <code>&lt;channel/&gt;</code> element from the main Spring Integration namespace.
It can be referenced by both the <code>input-channel</code> and <code>output-channel</code> attributes of any endpoint.
The difference is that this channel is backed by a JMS Queue instance named <code>exampleQueue</code>.
This means that asynchronous messaging is possible between the producing and consuming endpoints.
However, unlike the simpler asynchronous message channels created by adding a <code>&lt;queue/&gt;</code> element within a non-JMS <code>&lt;channel/&gt;</code> element, the messages are not stored in an in-memory queue.
Instead, those messages are passed within a JMS message body, and the full power of the underlying JMS provider is then available for that channel.
Probably the most common rationale for using this alternative is to take advantage of the persistence made available by the store-and-forward approach of JMS messaging.</p>
</div>
<div class="paragraph">
<p>If configured properly, the JMS-backed message channel also supports transactions.
In other words, a producer would not actually write to a transactional JMS-backed channel if its send operation is part of a transaction that rolls back.
Likewise, a consumer would not physically remove a JMS message from the channel if the reception of that message is part of a transaction that rolls back.
Note that the producer and consumer transactions are separate in such a scenario.
This is significantly different than the propagation of a transactional context across a simple, synchronous <code>&lt;channel/&gt;</code> element that has no <code>&lt;queue/&gt;</code> child element.</p>
</div>
<div class="paragraph">
<p>Since the preceding example above references a JMS Queue instance, it acts as a point-to-point channel.
If, on the other hand, you need publish-subscribe behavior, you can use a separate element and reference a JMS Topic instead.
The following example shows how to do so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;int-jms:publish-subscribe-channel id="jmsChannel" topic="exampleTopic"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For either type of JMS-backed channel, the name of the destination may be provided instead of a reference, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;int-jms:channel id="jmsQueueChannel" queue-name="exampleQueueName"/&gt;

&lt;jms:publish-subscribe-channel id="jmsTopicChannel" topic-name="exampleTopicName"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding examples, the destination names are resolved by Spring&#8217;s default <code>DynamicDestinationResolver</code> implementation, but you could provide any implementation of the <code>DestinationResolver</code> interface.
Also, the JMS <code>ConnectionFactory</code> is a required property of the channel, but, by default, the expected bean name would be <code>jmsConnectionFactory</code>.
The following example provides both a custom instance for resolution of the JMS destination names and a different name for the <code>ConnectionFactory</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;int-jms:channel id="jmsChannel" queue-name="exampleQueueName"
    destination-resolver="customDestinationResolver"
    connection-factory="customConnectionFactory"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For the <code>&lt;publish-subscribe-channel /&gt;</code>, set the <code>durable</code> attribute to <code>true</code> for a durable subscription or <code>subscription-shared</code> for a shared subscription (requires a JMS 2.0 broker and has been available since version 4.2).
Use <code>subscription</code> to name the subscription.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jms-selectors"><a class="anchor" href="#jms-selectors"></a>Using JMS Message Selectors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With JMS message selectors, you can filter <a href="https://javadoc.io/doc/jakarta.jms/jakarta.jms-api/latest/jakarta/jms/Message.html">JMS Messages</a> based on JMS headers as well as JMS properties.
For example, if you want to listen to messages whose custom JMS header property, <code>myHeaderProperty</code>, equals <code>something</code>, you can specify the following expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">myHeaderProperty = 'something'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Message selector expressions are a subset of the <a href="https://en.wikipedia.org/wiki/SQL-92">SQL-92</a> conditional expression syntax and are defined as part of the <a href="https://docs.oracle.com/cd/E19798-01/821-1841/bncer/index.html">Java Message Service</a> specification.
You can specify the JMS message <code>selector</code> attribute by using XML namespace configuration for the following Spring Integration JMS components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JMS Channel</p>
</li>
<li>
<p>JMS Publish Subscribe Channel</p>
</li>
<li>
<p>JMS Inbound Channel Adapter</p>
</li>
<li>
<p>JMS Inbound Gateway</p>
</li>
<li>
<p>JMS Message-driven Channel Adapter</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You cannot reference message body values by using JMS Message selectors.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jms-samples"><a class="anchor" href="#jms-samples"></a>JMS Samples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To experiment with these JMS adapters, check out the JMS samples available in the Spring Integration Samples Git repository at <a href="https://github.com/SpringSource/spring-integration-samples/tree/main/basic/jms">https://github.com/spring-projects/spring-integration-samples/tree/master/basic/jms</a>.</p>
</div>
<div class="paragraph">
<p>That repository includes two samples.
One provides inbound and outbound channel adapters, and the other provides inbound and outbound gateways.
They are configured to run with an embedded <a href="https://activemq.apache.org/">ActiveMQ</a> process, but you can modify the <a href="https://github.com/spring-projects/spring-integration-samples/blob/main/basic/jms/src/main/resources/META-INF/spring/integration/common.xml">common.xml</a> Spring application context file of each sample to support either a different JMS provider or a standalone ActiveMQ process.</p>
</div>
<div class="paragraph">
<p>In other words, you can split the configuration so that the inbound and outbound adapters run in separate JVMs.
If you have ActiveMQ installed,  modify the <code>brokerURL</code> property within the <code>common.xml</code> file to use <code>tcp://localhost:61616</code> (instead of <code>vm://localhost</code>).
Both of the samples accept input from stdin and echo back to stdout.
Look at the configuration to see how these messages are routed over JMS.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="jpa/outbound-gateways.html">Outbound Gateways</a></span>
  <span class="next"><a href="jmx.html">JMX Support</a></span>
</nav>
</article>
</div>  </div>
</main>
<div class="modal micromodal-slide" id="modal-versions" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true">
            <main class="modal__content" id="modal-versions-content">
              <button data-micromodal-close class="modal-versions-close">
                <svg width="28px" height="28px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><defs><style>.cls-1{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}</style></defs><title/><g id="cross"><line class="cls-1" x1="7" x2="25" y1="7" y2="25"/><line class="cls-1" x1="7" x2="25" y1="25" y2="7"/></g></svg>
              </button>
              <div class="colset">
                <div class="col-left">
                  <ul class="nav-versions">
                    <li class="component is-current">
                      <a class="title" href="index.html">Spring Integration</a>
                      <ul class="versions">
                        <li class="version is-current is-latest">
                          <a href="index.html">
                            6.2.0-SNAPSHOT<span class="current">current</span>
                          </a>
                        </li>
                      </ul>
                    </li>
                    <li class="component">
                      <a class="title" href="spring-integration/index.html">Spring Integration</a>
                      <ul class="versions">
                        <li class="version is-latest">
                          <a href="spring-integration/index.html">
                            6.2.0-SNAPSHOT<span class="current">current</span>
                          </a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </div>
                <div class="col-right">
                  <ul>
                    <li>
                      Related Spring Documentation
                      <ul>
                        <li><a href="https://docs.spring.io/spring-framework/reference/">Spring Framework</a></li>
                        <li><a href="https://docs.spring.io/spring-security/reference/">Spring Security</a></li>
                        <li><a href="https://docs.spring.io/spring-ldap/reference/">Spring LDAP</a></li>
                        <li><a href="https://docs.spring.io/spring-session/reference/">Spring Session</a></li>
                        <li><a href="https://docs.spring.io/spring-authorization-server/reference/">Spring Authorization Server</a></li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </main>
        </div>
    </div>
</div>

</div>
<footer class="footer flex">
    <div id="spring-links flex">
        <img id="springlogo" src="./_/img/spring-logo.svg" alt="Spring">
        <p class="smallest antialiased">© <script>var d = new Date();
        document.write(d.getFullYear());</script> <a href="https://www.vmware.com/">VMware</a>, Inc. or its affiliates. <a href="https://www.vmware.com/help/legal.html">Terms of Use</a> • <a href="https://www.vmware.com/help/privacy.html" rel="noopener noreferrer">Privacy</a> • <a href="https://spring.io/trademarks">Trademark Guidelines</a> <span id="thank-you-mobile">• <a href="https://spring.io/thank-you">Thank you</a></span> • <a href="https://www.vmware.com/help/privacy/california-privacy-rights.html">Your California Privacy Rights</a> • <a class="ot-sdk-show-settings">Cookie Settings</a> <span id="teconsent"></span></p>
        <p class="smallest antialiased has-gray-text">Apache®, Apache Tomcat®, Apache Kafka®, Apache Cassandra&trade;, and Apache Geode&trade; are trademarks or registered trademarks of the Apache Software Foundation in the United States and/or other countries. Java&trade;, Java&trade; SE, Java&trade; EE, and OpenJDK&trade; are trademarks of Oracle and/or its affiliates. Kubernetes® is a registered trademark of the Linux Foundation in the United States and other countries. Linux® is the registered trademark of Linus Torvalds in the United States and other countries. Windows® and Microsoft® Azure are registered trademarks of Microsoft Corporation. “AWS” and “Amazon Web Services” are trademarks or registered trademarks of Amazon.com Inc. or its affiliates. All other trademarks and copyrights are property of their respective owners and are only mentioned for informative purposes. Other names may be trademarks of their respective owners.</p>
    </div>
    <div id="social-icons" class="flex jc-between">
        <a href="https://www.youtube.com/user/SpringSourceDev" title="Youtube"><svg id="youtube-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><circle class="cls-1" cx="20" cy="20" r="20"/><path class="cls-2" d="M30.91,14.53a2.89,2.89,0,0,0-2-2C27.12,12,20,12,20,12s-7.12,0-8.9.47a2.9,2.9,0,0,0-2,2A30.56,30.56,0,0,0,8.63,20a30.44,30.44,0,0,0,.46,5.47,2.89,2.89,0,0,0,2,2C12.9,28,20,28,20,28s7.12,0,8.9-.47a2.87,2.87,0,0,0,2-2A30.56,30.56,0,0,0,31.37,20,28.88,28.88,0,0,0,30.91,14.53ZM17.73,23.41V16.59L23.65,20Z"/></svg></a>
        <a href="https://github.com/spring-projects" title="Github"><svg id="github-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.93 75.93"><path class="cls-1" d="M38,0a38,38,0,1,0,38,38A38,38,0,0,0,38,0Z"/></g><path class="cls-2" d="M38,15.59A22.95,22.95,0,0,0,30.71,60.3c1.15.21,1.57-.5,1.57-1.11s0-2,0-3.9c-6.38,1.39-7.73-3.07-7.73-3.07A6.09,6.09,0,0,0,22,48.86c-2.09-1.42.15-1.39.15-1.39a4.81,4.81,0,0,1,3.52,2.36c2,3.5,5.37,2.49,6.67,1.91a4.87,4.87,0,0,1,1.46-3.07c-5.09-.58-10.45-2.55-10.45-11.34a8.84,8.84,0,0,1,2.36-6.15,8.29,8.29,0,0,1,.23-6.07s1.92-.62,6.3,2.35a21.82,21.82,0,0,1,11.49,0c4.38-3,6.3-2.35,6.3-2.35a8.29,8.29,0,0,1,.23,6.07,8.84,8.84,0,0,1,2.36,6.15c0,8.81-5.37,10.75-10.48,11.32a5.46,5.46,0,0,1,1.56,4.25c0,3.07,0,5.54,0,6.29s.42,1.33,1.58,1.1A22.94,22.94,0,0,0,38,15.59Z"/></svg></a>
        <a href="https://twitter.com/springcentral" title="Twitter"><svg id="twitter-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.93 75.93"><circle class="cls-1" cx="37.97" cy="37.97" r="37.97"/><path id="Twitter-2" data-name="Twitter" class="cls-2" d="M55.2,22.73a15.43,15.43,0,0,1-4.88,1.91,7.56,7.56,0,0,0-5.61-2.49A7.78,7.78,0,0,0,37,30a7.56,7.56,0,0,0,.2,1.79,21.63,21.63,0,0,1-15.84-8.23,8,8,0,0,0,2.37,10.52,7.66,7.66,0,0,1-3.48-1v.09A7.84,7.84,0,0,0,26.45,41a7.54,7.54,0,0,1-2,.28A7.64,7.64,0,0,1,23,41.09a7.71,7.71,0,0,0,7.18,5.47,15.21,15.21,0,0,1-9.55,3.37,15.78,15.78,0,0,1-1.83-.11,21.41,21.41,0,0,0,11.78,3.54c14.13,0,21.86-12,21.86-22.42,0-.34,0-.68,0-1a15.67,15.67,0,0,0,3.83-4.08,14.9,14.9,0,0,1-4.41,1.24A7.8,7.8,0,0,0,55.2,22.73Z"/></svg></a>
    </div>
</footer>
<script src="./_/js/vendor/import.js"></script>
<script src="./_/js/site.js"></script>
<script async src="./_/js/vendor/highlight.js"></script>
<script async src="./_/js/vendor/asciidoctor-tabs.js" data-sync-storage-key="docs:preferred-tab"></script>

<div class="modal micromodal-slide" id="modal-1" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
            <main class="modal__content" id="modal-1-content">
                <div id="searchbox"></div>
                <div id="counter"></div>
                <div class="search-by">
                    <a target="_blank" rel="noopener noreferrer" href="https://www.algolia.com/" aria-label="Search by Algolia">
                        <img class="light" width="140" src="./_/img/algolia-light.svg" />
                        <img class="dark" width="140" src="./_/img/algolia-dark.svg" />
                    </a>
                </div>
                <div id="hits"></div>
            </main>
        </div>
    </div>
</div>

<script src="https://unpkg.com/hotkeys-js/dist/hotkeys.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.17.0/dist/algoliasearch-lite.umd.js" integrity="sha256-Lf9DrpGmcRip6OQzbcL6lnvNmoZNSKpyQX5pMlwatWE=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.54.1/dist/instantsearch.production.min.js" integrity="sha256-xYsZPDeNjYNTBWLvqD2Lxe98hOxcDgOHyMPfz4tVAbk=" crossorigin="anonymous"></script>
<script async id="search-script" src="./_/js/vendor/search.js" data-app-id="WB1FQYI187" data-api-key="9d489079e5ec46dbb238909fee5c9c29" data-index-name="springintegration" data-stylesheet="./_/css/vendor/search.css" data-page-version="6.2.0"></script>

  </body>
</html>
